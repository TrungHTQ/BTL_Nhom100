{"ast":null,"code":"import { signInWithEmailAndPassword, createUserWithEmailAndPassword } from 'firebase/auth';\nexport function useLoginFormHandler({\n  auth,\n  email,\n  password,\n  isRegister,\n  setEmail,\n  setPassword,\n  setError,\n  setIsRegister,\n  emailRef\n}) {\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    try {\n      if (isRegister) {\n        await createUserWithEmailAndPassword(auth, email, password);\n        alert('Đăng ký thành công! Vui lòng đăng nhập lại.');\n        await auth.signOut();\n        setIsRegister(false);\n        setEmail('');\n        setPassword('');\n        setError('');\n        if (emailRef.current) {\n          emailRef.current.focus();\n        }\n        return;\n      } else {\n        await signInWithEmailAndPassword(auth, email, password);\n      }\n    } catch (err) {\n      let code = err.code || '';\n      let message = '';\n      if (err.message && err.message.includes('auth/invalid-credential')) {\n        message = 'Email hoặc mật khẩu không đúng.';\n      } else {\n        if (!code && err.message) {\n          const match = err.message.match(/auth\\/(\\w+-?\\w*)/);\n          if (match) code = `auth/${match[1]}`;\n        }\n        if (code === 'auth/invalid-email') {\n          message = 'Email không hợp lệ.';\n        } else if (code === 'auth/user-not-found' || code === 'auth/wrong-password' || code === 'auth/invalid-credential') {\n          message = 'Email hoặc mật khẩu không đúng.';\n        } else if (code === 'auth/email-already-in-use') {\n          message = 'Email đã được sử dụng.';\n        } else if (code === 'auth/weak-password') {\n          message = 'Mật khẩu quá yếu. Vui lòng nhập mật khẩu mạnh hơn.';\n        } else {\n          message = 'Đã xảy ra lỗi. Vui lòng thử lại.';\n        }\n      }\n      setError(message);\n      setEmail('');\n      setPassword('');\n      if (emailRef.current) {\n        emailRef.current.focus();\n      }\n    }\n  };\n  return handleSubmit;\n}","map":{"version":3,"names":["signInWithEmailAndPassword","createUserWithEmailAndPassword","useLoginFormHandler","auth","email","password","isRegister","setEmail","setPassword","setError","setIsRegister","emailRef","handleSubmit","e","preventDefault","alert","signOut","current","focus","err","code","message","includes","match"],"sources":["C:/Users/Ha Tran Quang Trung/OneDrive/Documents/src/src/component/login_component/LoginFormHandler.jsx"],"sourcesContent":["import { signInWithEmailAndPassword, createUserWithEmailAndPassword } from 'firebase/auth';\r\n\r\nexport function useLoginFormHandler({ auth, email, password, isRegister, setEmail, setPassword, setError, setIsRegister, emailRef }) {\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n      if (isRegister) {\r\n        await createUserWithEmailAndPassword(auth, email, password);\r\n        alert('Đăng ký thành công! Vui lòng đăng nhập lại.');\r\n        await auth.signOut();\r\n        setIsRegister(false);\r\n        setEmail('');\r\n        setPassword('');\r\n        setError('');\r\n        if (emailRef.current) {\r\n          emailRef.current.focus();\r\n        }\r\n        return;\r\n      } else {\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n      }\r\n    } catch (err) {\r\n      let code = err.code || '';\r\n      let message = '';\r\n      if (err.message && err.message.includes('auth/invalid-credential')) {\r\n        message = 'Email hoặc mật khẩu không đúng.';\r\n      } else {\r\n        if (!code && err.message) {\r\n          const match = err.message.match(/auth\\/(\\w+-?\\w*)/);\r\n          if (match) code = `auth/${match[1]}`;\r\n        }\r\n        if (code === 'auth/invalid-email') {\r\n          message = 'Email không hợp lệ.';\r\n        } else if (\r\n          code === 'auth/user-not-found' ||\r\n          code === 'auth/wrong-password' ||\r\n          code === 'auth/invalid-credential'\r\n        ) {\r\n          message = 'Email hoặc mật khẩu không đúng.';\r\n        } else if (code === 'auth/email-already-in-use') {\r\n          message = 'Email đã được sử dụng.';\r\n        } else if (code === 'auth/weak-password') {\r\n          message = 'Mật khẩu quá yếu. Vui lòng nhập mật khẩu mạnh hơn.';\r\n        } else {\r\n          message = 'Đã xảy ra lỗi. Vui lòng thử lại.';\r\n        }\r\n      }\r\n      setError(message);\r\n      setEmail('');\r\n      setPassword('');\r\n      if (emailRef.current) {\r\n        emailRef.current.focus();\r\n      }\r\n    }\r\n  };\r\n  return handleSubmit;\r\n}\r\n"],"mappings":"AAAA,SAASA,0BAA0B,EAAEC,8BAA8B,QAAQ,eAAe;AAE1F,OAAO,SAASC,mBAAmBA,CAAC;EAAEC,IAAI;EAAEC,KAAK;EAAEC,QAAQ;EAAEC,UAAU;EAAEC,QAAQ;EAAEC,WAAW;EAAEC,QAAQ;EAAEC,aAAa;EAAEC;AAAS,CAAC,EAAE;EACnI,MAAMC,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBL,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACF,IAAIH,UAAU,EAAE;QACd,MAAML,8BAA8B,CAACE,IAAI,EAAEC,KAAK,EAAEC,QAAQ,CAAC;QAC3DU,KAAK,CAAC,6CAA6C,CAAC;QACpD,MAAMZ,IAAI,CAACa,OAAO,CAAC,CAAC;QACpBN,aAAa,CAAC,KAAK,CAAC;QACpBH,QAAQ,CAAC,EAAE,CAAC;QACZC,WAAW,CAAC,EAAE,CAAC;QACfC,QAAQ,CAAC,EAAE,CAAC;QACZ,IAAIE,QAAQ,CAACM,OAAO,EAAE;UACpBN,QAAQ,CAACM,OAAO,CAACC,KAAK,CAAC,CAAC;QAC1B;QACA;MACF,CAAC,MAAM;QACL,MAAMlB,0BAA0B,CAACG,IAAI,EAAEC,KAAK,EAAEC,QAAQ,CAAC;MACzD;IACF,CAAC,CAAC,OAAOc,GAAG,EAAE;MACZ,IAAIC,IAAI,GAAGD,GAAG,CAACC,IAAI,IAAI,EAAE;MACzB,IAAIC,OAAO,GAAG,EAAE;MAChB,IAAIF,GAAG,CAACE,OAAO,IAAIF,GAAG,CAACE,OAAO,CAACC,QAAQ,CAAC,yBAAyB,CAAC,EAAE;QAClED,OAAO,GAAG,iCAAiC;MAC7C,CAAC,MAAM;QACL,IAAI,CAACD,IAAI,IAAID,GAAG,CAACE,OAAO,EAAE;UACxB,MAAME,KAAK,GAAGJ,GAAG,CAACE,OAAO,CAACE,KAAK,CAAC,kBAAkB,CAAC;UACnD,IAAIA,KAAK,EAAEH,IAAI,GAAG,QAAQG,KAAK,CAAC,CAAC,CAAC,EAAE;QACtC;QACA,IAAIH,IAAI,KAAK,oBAAoB,EAAE;UACjCC,OAAO,GAAG,qBAAqB;QACjC,CAAC,MAAM,IACLD,IAAI,KAAK,qBAAqB,IAC9BA,IAAI,KAAK,qBAAqB,IAC9BA,IAAI,KAAK,yBAAyB,EAClC;UACAC,OAAO,GAAG,iCAAiC;QAC7C,CAAC,MAAM,IAAID,IAAI,KAAK,2BAA2B,EAAE;UAC/CC,OAAO,GAAG,wBAAwB;QACpC,CAAC,MAAM,IAAID,IAAI,KAAK,oBAAoB,EAAE;UACxCC,OAAO,GAAG,oDAAoD;QAChE,CAAC,MAAM;UACLA,OAAO,GAAG,kCAAkC;QAC9C;MACF;MACAZ,QAAQ,CAACY,OAAO,CAAC;MACjBd,QAAQ,CAAC,EAAE,CAAC;MACZC,WAAW,CAAC,EAAE,CAAC;MACf,IAAIG,QAAQ,CAACM,OAAO,EAAE;QACpBN,QAAQ,CAACM,OAAO,CAACC,KAAK,CAAC,CAAC;MAC1B;IACF;EACF,CAAC;EACD,OAAON,YAAY;AACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}